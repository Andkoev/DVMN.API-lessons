21.10.2025

UPD:
Добавили проверку HTTP-статуса во все запросы, чтобы ловить ошибки сервера (401, 404, 500).
Учли ситуацию, когда VK возвращает ошибку со статусом 200 — теперь ensure_vk_ok поднимает HTTPError, если в ответе есть "error".
Переименовали переменные без суффикса _json, чтобы названия совпадали с тем, что реально хранится.


В этой версии мы немного подчистили код и сделали его логичнее.
Во-первых, уточнили названия переменных — теперь они более понятные и отражают суть того, что в них хранится.
Во-вторых, сократили код за счёт добавления новых переменных
API_URL = "https://api.vk.com/method" и
API_VERSION = "5.199".
Раньше эти значения прописывались в каждой функции вручную, теперь вынесены в начало и используются повсюду.

Также переписали блок except: теперь обрабатываются конкретные ошибки (HTTPError, RequestException, KeyError), вместо одного общего Exception. Это сделало вывод сообщений аккуратнее и понятнее при тестировании.

Функция is_shorten_link теперь проверяет ссылку через API VK, как требовалось в задании.